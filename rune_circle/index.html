<!DOCTYPE html >
< html lang = "ru" > 
< голова >
< meta charset = "UTF-8" /> 
<title> Создатель рунического круга </title>​​
< стиль >
  тело { семейство шрифтов : sans-serif; отображение : flex; }
  #элементы управления { margin-left : 1em ; }
  # кнопка списка рун { display :block; margin : 2px 0 ; }
  
  #canvas { border : 1px solid #444 ; background : #fafafa ; }
</ стиль >
</head>​​
< тело >
< svg id = "холст" ширина = "500" высота = "500" > </ svg >   
< div id = "элементы управления" > 
  < div id = "уровень" > </ div > 
  < div id = "список-рун" > </ div > 
  < button id = " add-circle" > Добавить внутренний круг </button> 
  < button id = " up-circle" > На один уровень вверх </button> 
  < pre id = "интерпретация" > </ pre > 
</ див >
< сценарий >
// Простые векторные пути для нескольких образцов рун. Каждая руна вписывается в
// Квадрат 20×20 с центром в точке (0,0).
константные руны = [
  { имя : 'Ансуз' , значение : 'слово, знание' ,
   путь : 'M0,-20 L0,20 M0,0 L12,-10 M0,0 L12,10' },
  { имя : 'Лагуз' , значение : 'вода, поток' ,
   путь : 'M0,-20 L0,20 M0,-10 Q8,0 0,10' },
  { имя : 'Кеназ' , значение : 'огонь, очищение' ,
   путь : 'M-8,-20 L8,0 L-8,20' },
  { имя : 'Наутиз' , значение : 'ограничение, стоимость' ,
   путь : 'M0,-20 L0,20 M-8,-8 L8,8' },
  { имя : 'Raidho' , значение : 'путь, направление' ,
   путь : 'М-5,-20 Л-5,20 М-5,-10 Л8,0 Л-5,10' }
];

класс Круг {
 
  конструктор ( радиус ) {
    это . радиус = радиус;
    это . руны = [];
  }
}

константные круги = [ новый круг ( 200 )];
 
пусть ток = 0 ;

const svg = document.getElementById ( 'canvas' ) ;
const runeList = document.getElementById ( 'rune-list ' ) ;
константа интерпретация = документ.getElementById ( 'интерпретация ' )
 ;
const levelDiv = document.getElementById ( 'level ' ) ;

функция рисования ( ) {
 
  svg.innerHTML = ' '
 ;
  levelDiv.textContent = 'Текущий уровень круга: ' + current
 ;
  круги. forEach ( ( круг, idx ) => {
    const g = document.createElementNS ( ' http://www.w3.org/2000/svg' , 'g' )
 ;
    const c = document.createElementNS ( ' http://www.w3.org/2000/svg' , 'circle' )
 ;
    c.setAttribute ( 'cx' , 250 )
 ;
    c.setAttribute ( 'cy' , 250 )
 ;
    c.setAttribute ( 'r' , circle.radius ) ;
    c.setAttribute ( 'fill' , 'none' ) ;
    c.setAttribute ( 'stroke' , '#000' )
 ;
    г. appendChild (c);
    круг. руны . forEach ( ( руна, я ) => {
      угол const = (i / окружность. руны . длина ) * 2 * Матем . ПИ - Матем . ПИ / 2 ;
      const x = 250 + окружность. радиус * Математика . cos (угол);
      const y = 250 + окружность. радиус * Матем . синус (угол);
      const rg = document.createElementNS ( ' http://www.w3.org/2000/svg' , 'g' )
 ;
      rg.setAttribute ( 'transform' , ` translate( ${x} , ${y} )` );
      const p = document.createElementNS ( ' http://www.w3.org/2000/svg' , 'path' )
 ;
      p.setAttribute ( 'd' , rune.path )
 ;
      p.setAttribute ( 'fill' , 'none' ) ;
      p.setAttribute ( 'stroke' , '#000' )
 ;
      p.setAttribute ( 'ширина-штриха' , 2 ) ;
      rg.appendChild (p)
 ;
      г. appendChild (rg);
    });
    svg.appendChild (г)
 ;
  });
  интерпретировать ();
}

функция интерпретирует ( ) {
 
  константные слова = [];
  круги. forEach ( ( круг, idx ) => {
    круг.руны.forEach ( r = > слова.толчок ( r.значение ) ) ;
​
  });
  если (слова. длина ) {
    interpretation. textContent = 'Этот ритуал объединяет: ' + words. join ( ', ' );
  } еще {
    интерпретация. textContent = '' ;
  }
}

функция addRuneToCircle ( руна ) {
 
  круги[текущий]. руны . толчок (руна);
  рисовать ();
}

руны.forEach ( r = > {
  const btn = document.createElement ( 'button ' )
 ;
  btn.textContent = r.name ;
​
  btn.addEventListener ( 'click' , () => addRuneToCircle ( r ));
 
  runeList.appendChild (кнопка)
 ;
});

document.getElementById ( 'add-circle' ). addEventListener ( ' click' , ( ) => {
  константный радиус = круги[текущий]. радиус - 50 ;
  если (радиус > 30 ) {
    круги. push ( новый круг (радиус));
 
    ток = круги. длина - 1 ;
    рисовать ();
  }
});

document.getElementById ( 'up-circle' ). addEventListener ( ' click' , ( ) => {
  если (текущий > 0 ) {
    круги. поп ();
    ток -= 1 ;
    рисовать ();
  }
});

рисовать ();
</ скрипт >
</ тело >
</html>